# Set up global variables
globals:
  - id: dbright
    type: int
    restore_value: false
    initial_value: '0'
  - id: temp_offset
    type: float
    restore_value: true
    initial_value: '0.0'
  - id: hum_offset
    type: float
    restore_value: true
    initial_value: '0.0'
  - id: backlight_brightness
    type: int
    restore_value: false
    initial_value: '33'

# Set up temperature offset and display brightness controls
number:
  - platform: template
    name: "Temperature Offset"
    id: temp_offset_control
    icon: "mdi:thermometer-alert"
    min_value: -10.0
    max_value: 10.0
    step: 0.1
    initial_value: 0.0
    entity_category: "CONFIG"
    set_action:
      - lambda: |-
          id(temp_offset) = x;
  - platform: template
    name: "Humidity Offset"
    id: hum_offset_control
    icon: "mdi:water-percent-alert"
    min_value: -10.0
    max_value: 10.0
    step: 0.1
    initial_value: 0.0
    entity_category: "CONFIG"
    set_action:
      - lambda: |-
          id(hum_offset) = x;
  - platform: template
    id: backlight_brightness_control
    name: "Backlight Brightness"
    icon: "mdi:lightbulb"
    min_value: 0
    max_value: 100
    restore_value: true
    step: 1
    optimistic: true
    on_value:
      - lambda: |-
          id(backlight_brightness) = x;
          if(x > 0) { id(back_light).turn_on().set_brightness(x/100).perform(); }
          else if(x == 0) { id(back_light).turn_off().perform(); }

